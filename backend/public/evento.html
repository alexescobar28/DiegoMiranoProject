<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Mirano Survey</title>
    <style></style>
    <link
      rel="stylesheet"
      href="Css/evento.css"
    />
  </head>
  <body>
    <div class="phone-container">
      <div class="screen">
        <div class="header">
          <img
            src="assets/images/logo.png"
            alt="Mirano Logo"
            class="logo"
          />
        </div>

        <div class="content">
          <!-- Screen 1: Event Type Selection -->
          <div
            id="screen1"
            class="screen-content"
          >
            <div class="question-text">¿En qué tipo de evento los usaste?</div>
            <div class="options-container">
              <button
                class="option"
                data-value="gala"
              >
                <img
                  src="assets/images/noche_gala.png"
                  alt="Gala"
                  class="option-image"
                />
                <span class="option-text">Noche de gala</span>
              </button>
              <button
                class="option"
                data-value="casual"
              >
                <img
                  src="assets/images/cena_casual.jpeg"
                  alt="Casual"
                  class="option-image"
                />
                <span class="option-text">Cena casual</span>
              </button>
              <button
                class="option"
                data-value="unexpected"
              >
                <img
                  src="assets/images/eventoInesperado.jpeg"
                  alt="Inesperado"
                  class="option-image"
                />
                <span class="option-text">Evento inesperado</span>
              </button>
            </div>
          </div>
          <!-- Screen 2: Appropriateness Feedback -->
          <div
            id="screen2"
            class="screen-content hidden"
          >
            <div class="question-text">
              ¿Te parecieron apropiados para la ocasión?
            </div>
            <div class="feedback-container">
              <button
                class="feedback-option thumbs-up"
                data-value="yes"
              >
                <div class="feedback-icon">👍</div>
              </button>
              <button
                class="feedback-option thumbs-down"
                data-value="no"
              >
                <div class="feedback-icon">👎</div>
              </button>
            </div>
          </div>

          <!-- Screen 3: Comfort Feedback -->
          <div
            id="screen3"
            class="screen-content hidden"
          >
            <div class="question-text">
              ¿Notaste alguna incomodidad durante el tiempo de pie prolongado?
            </div>
            <div class="feedback-container">
              <button
                class="feedback-option thumbs-up"
                data-value="yes"
              >
                <div class="feedback-icon">👍</div>
              </button>
              <button
                class="feedback-option thumbs-down"
                data-value="no"
              >
                <div class="feedback-icon">👎</div>
              </button>
            </div>
          </div>

          <!-- Screen 4: Purchase Intent -->
          <div
            id="screen4"
            class="screen-content hidden"
          >
            <div class="question-text">¿Volverías a comprar con nosotros?</div>
            <div class="rating-options">
              <button
                class="rating-option"
                data-value="absolutely"
              >
                <span class="rating-emoji">😊</span>
                <span>Absolutamente</span>
              </button>
              <button
                class="rating-option"
                data-value="maybe"
              >
                <span class="rating-emoji">😐</span>
                <span>No lo sé</span>
              </button>
              <button
                class="rating-option"
                data-value="probably-not"
              >
                <span class="rating-emoji">😕</span>
                <span>Tal vez no</span>
              </button>
            </div>
          </div>

          <button
            class="next-button"
            id="nextButton"
          >
            Siguiente
          </button>
        </div>
      </div>
    </div>

    <script>
      class SurveyApp {
        constructor() {
          this.currentScreen = 1;
          this.maxScreens = 4;
          this.responses = {};
          this.init();
        }

        init() {
          this.bindEvents();
          this.updateButtonState();
          this.addTouchSupport();
        }

        bindEvents() {
          // Event listeners para opciones
          document.addEventListener('click', (e) => {
            if (
              e.target.classList.contains('option') ||
              e.target.closest('.option')
            ) {
              this.handleOptionClick(e.target.closest('.option'));
            }

            if (
              e.target.classList.contains('feedback-option') ||
              e.target.closest('.feedback-option')
            ) {
              this.handleFeedbackClick(e.target.closest('.feedback-option'));
            }

            if (
              e.target.classList.contains('rating-option') ||
              e.target.closest('.rating-option')
            ) {
              this.handleRatingClick(e.target.closest('.rating-option'));
            }
          });

          // Event listener para botón siguiente
          document
            .getElementById('nextButton')
            .addEventListener('click', () => {
              this.nextScreen();
            });
        }

        addTouchSupport() {
          // Añadir soporte táctil mejorado
          const options = document.querySelectorAll(
            '.option, .feedback-option, .rating-option'
          );
          options.forEach((option) => {
            option.addEventListener('touchstart', (e) => {
              e.preventDefault();
              option.style.transform = 'scale(0.98)';
            });

            option.addEventListener('touchend', (e) => {
              e.preventDefault();
              option.style.transform = '';
              option.click();
            });
          });
        }

        handleOptionClick(option) {
          const currentScreenEl = document.getElementById(
            `screen${this.currentScreen}`
          );
          currentScreenEl.querySelectorAll('.option').forEach((opt) => {
            opt.classList.remove('selected');
          });

          option.classList.add('selected');
          this.responses[`screen${this.currentScreen}`] = option.dataset.value;
          this.updateButtonState();
        }

        handleFeedbackClick(feedback) {
          const currentScreenEl = document.getElementById(
            `screen${this.currentScreen}`
          );
          currentScreenEl
            .querySelectorAll('.feedback-option')
            .forEach((opt) => {
              opt.classList.remove('selected');
            });

          feedback.classList.add('selected');
          this.responses[`screen${this.currentScreen}`] =
            feedback.dataset.value;
          this.updateButtonState();
        }

        handleRatingClick(rating) {
          const currentScreenEl = document.getElementById(
            `screen${this.currentScreen}`
          );
          currentScreenEl.querySelectorAll('.rating-option').forEach((opt) => {
            opt.classList.remove('selected');
          });

          rating.classList.add('selected');
          this.responses[`screen${this.currentScreen}`] = rating.dataset.value;
          this.updateButtonState();
        }

        nextScreen() {
          if (!this.canProceed()) return;

          document
            .getElementById(`screen${this.currentScreen}`)
            .classList.add('hidden');
          this.currentScreen++;

          if (this.currentScreen <= this.maxScreens) {
            document
              .getElementById(`screen${this.currentScreen}`)
              .classList.remove('hidden');
            this.updateButtonState();
          } else {
            this.completeSurvey();
          }
        }

        canProceed() {
          return this.responses[`screen${this.currentScreen}`] !== undefined;
        }

        updateButtonState() {
          const nextButton = document.getElementById('nextButton');
          const canProceed = this.canProceed();

          nextButton.disabled = !canProceed;
          nextButton.style.opacity = canProceed ? '1' : '0.5';
          nextButton.style.pointerEvents = canProceed ? 'auto' : 'none';

          if (this.currentScreen === this.maxScreens) {
            nextButton.textContent = 'Finalizar';
          } else {
            nextButton.textContent = 'Siguiente';
          }
        }

        completeSurvey() {
          window.location.href = 'thanks.html';
        }
      }

      // Inicializar la aplicación cuando el DOM esté listo
      document.addEventListener('DOMContentLoaded', () => {
        new SurveyApp();
      });
      function scrollOptions(direction) {
        const container = document.querySelector('.options-container');
        const scrollAmount = container.offsetWidth * 0.8;
        container.scrollBy({
          left: direction === 'next' ? scrollAmount : -scrollAmount,
          behavior: 'smooth',
        });
      }
    </script>
  </body>
</html>
